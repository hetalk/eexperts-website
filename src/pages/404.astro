---
/*
 * 404 Error Page
 * Last Updated: 2025-09-16 09:19:50 IST
 *
 * Custom 404 page with helpful navigation and search
 */

import BaseLayout from '../layouts/BaseLayout.astro';
---

<BaseLayout
  title="Page Not Found | Ritesource & eExperts"
  description="The page you're looking for doesn't exist. Find what you need with our site navigation and search."
>
  <!-- 404 Error Section -->
  <section class="min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-20">
    <div class="container mx-auto px-4">
      <div class="max-w-2xl mx-auto text-center">
        <!-- Error Code -->
        <div class="mb-8">
          <h1 class="text-9xl font-bold text-primary opacity-20">404</h1>
        </div>

        <!-- Error Message -->
        <div class="mb-8">
          <h2 class="text-4xl md:text-5xl font-bold text-gray-800 mb-4">
            Page Not Found
          </h2>
          <p class="text-xl text-gray-600 mb-6">
            The page you're looking for doesn't exist or has been moved.
          </p>
        </div>

        <!-- Search Box -->
        <div class="mb-8">
          <div class="max-w-md mx-auto">
            <div class="relative">
              <input
                type="text"
                id="search-input"
                placeholder="Search our site..."
                class="w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"
              />
              <div class="absolute inset-y-0 left-0 flex items-center pl-4">
                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
              </div>
            </div>
            <div id="search-results" class="hidden mt-4 text-left bg-white rounded-lg shadow-lg border border-gray-200 max-h-60 overflow-y-auto">
              <!-- Search results will be populated here -->
            </div>
          </div>
        </div>

        <!-- Quick Links -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">Quick Links</h3>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <a
              href="/"
              class="bg-white rounded-lg shadow p-4 hover:shadow-md transition text-center"
            >
              <div class="text-2xl mb-2">üè†</div>
              <div class="text-sm font-medium text-gray-800">Home</div>
            </a>
            <a
              href="/services"
              class="bg-white rounded-lg shadow p-4 hover:shadow-md transition text-center"
            >
              <div class="text-2xl mb-2">‚öôÔ∏è</div>
              <div class="text-sm font-medium text-gray-800">Services</div>
            </a>
            <a
              href="/about"
              class="bg-white rounded-lg shadow p-4 hover:shadow-md transition text-center"
            >
              <div class="text-2xl mb-2">üë•</div>
              <div class="text-sm font-medium text-gray-800">About Us</div>
            </a>
            <a
              href="/contact"
              class="bg-white rounded-lg shadow p-4 hover:shadow-md transition text-center"
            >
              <div class="text-2xl mb-2">üìû</div>
              <div class="text-sm font-medium text-gray-800">Contact</div>
            </a>
          </div>
        </div>

        <!-- Popular Pages -->
        <div class="mb-8">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">Popular Pages</h3>
          <div class="space-y-2">
            <a
              href="/services/healthcare-qa"
              class="block bg-white rounded-lg shadow p-3 hover:shadow-md transition text-left"
            >
              <div class="font-medium text-primary">Healthcare Documentation QA</div>
              <div class="text-sm text-gray-600">HIPAA-compliant medical transcription quality assurance</div>
            </a>
            <a
              href="/services/software-testing"
              class="block bg-white rounded-lg shadow p-3 hover:shadow-md transition text-left"
            >
              <div class="font-medium text-primary">Software Testing Services</div>
              <div class="text-sm text-gray-600">Comprehensive software quality assurance and testing</div>
            </a>
            <a
              href="/services/geospatial-analysis"
              class="block bg-white rounded-lg shadow p-3 hover:shadow-md transition text-left"
            >
              <div class="font-medium text-primary">Geospatial Data Analysis</div>
              <div class="text-sm text-gray-600">GIS data processing and spatial analysis services</div>
            </a>
            <a
              href="/resources"
              class="block bg-white rounded-lg shadow p-3 hover:shadow-md transition text-left"
            >
              <div class="font-medium text-primary">Resource Library</div>
              <div class="text-sm text-gray-600">Free guides, whitepapers, and industry insights</div>
            </a>
          </div>
        </div>

        <!-- CTA Buttons -->
        <div class="space-y-4 md:space-y-0 md:space-x-4 md:flex md:justify-center">
          <a
            href="/"
            class="bg-primary text-white px-8 py-3 rounded-lg font-semibold hover:bg-primary/90 transition inline-block"
          >
            Back to Home
          </a>
          <a
            href="/contact"
            class="border border-primary text-primary px-8 py-3 rounded-lg font-semibold hover:bg-primary hover:text-white transition inline-block"
          >
            Contact Support
          </a>
        </div>

        <!-- Help Text -->
        <div class="mt-8 text-sm text-gray-500">
          <p>
            Still can't find what you're looking for?
            <a href="/contact" class="text-primary hover:underline">Contact our support team</a>
            or try searching above.
          </p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<script>
  // Simple site search functionality
  const searchInput = document.getElementById('search-input');
  const searchResults = document.getElementById('search-results');

  // Sample pages for search (in production, this would come from your CMS or API)
  const sitePages = [
    { title: 'Home', url: '/', description: 'Welcome to Ritesource & eExperts' },
    { title: 'About Us', url: '/about', description: 'Learn about our companies and team' },
    { title: 'Services', url: '/services', description: 'Our quality assurance and data solutions' },
    { title: 'Healthcare Documentation QA', url: '/services/healthcare-qa', description: 'HIPAA-compliant medical transcription QA' },
    { title: 'Software Testing', url: '/services/software-testing', description: 'Comprehensive software QA and testing' },
    { title: 'Geospatial Analysis', url: '/services/geospatial-analysis', description: 'GIS data processing and analysis' },
    { title: 'Electronics Data', url: '/services/electronics-data', description: 'Component data and technical solutions' },
    { title: 'Resources', url: '/resources', description: 'Free guides and industry insights' },
    { title: 'Contact', url: '/contact', description: 'Get in touch with our team' }
  ];

  let searchTimeout;

  searchInput?.addEventListener('input', function(e) {
    const query = e.target.value.trim().toLowerCase();

    // Clear previous timeout
    clearTimeout(searchTimeout);

    if (query.length < 2) {
      searchResults?.classList.add('hidden');
      return;
    }

    // Debounce search
    searchTimeout = setTimeout(() => {
      const results = sitePages.filter(page =>
        page.title.toLowerCase().includes(query) ||
        page.description.toLowerCase().includes(query)
      ).slice(0, 5); // Limit to 5 results

      if (results.length > 0) {
        searchResults.innerHTML = results.map(result => `
          <a
            href="${result.url}"
            class="block px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0"
          >
            <div class="font-medium text-gray-800">${result.title}</div>
            <div class="text-sm text-gray-600">${result.description}</div>
          </a>
        `).join('');

        searchResults?.classList.remove('hidden');
      } else {
        searchResults.innerHTML = `
          <div class="px-4 py-3 text-gray-500 text-center">
            No results found for "${query}"
          </div>
        `;
        searchResults?.classList.remove('hidden');
      }

      // Track search analytics
      if (window.analytics) {
        window.analytics.trackEvent('404 Page Search', {
          'Query': query,
          'Results Count': results.length
        });
      }
    }, 300);
  });

  // Hide search results when clicking outside
  document.addEventListener('click', function(e) {
    if (!searchInput?.contains(e.target) && !searchResults?.contains(e.target)) {
      searchResults?.classList.add('hidden');
    }
  });

  // Track 404 page analytics
  document.addEventListener('DOMContentLoaded', function() {
    if (window.analytics) {
      window.analytics.trackEvent('404 Page View', {
        'Referrer': document.referrer,
        'URL Attempted': window.location.pathname
      });
    }
  });

  // Handle Enter key in search
  searchInput?.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      const firstResult = searchResults?.querySelector('a');
      if (firstResult) {
        firstResult.click();
      }
    }
  });
</script>

<style>
  /* Search result highlight animation */
  #search-results a {
    transition: background-color 0.2s ease;
  }

  /* 404 number animation */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }

  h1 {
    animation: float 3s ease-in-out infinite;
  }

  /* Quick links hover effect */
  .grid a {
    transition: all 0.3s ease;
  }

  .grid a:hover {
    transform: translateY(-2px);
  }
</style>